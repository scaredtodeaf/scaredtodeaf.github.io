{"version":3,"file":"Source.js","sources":["../../src/Source.ts"],"sourcesContent":null,"names":["Source","type","_settingsType","name","settings","filters","linked","itemInstances","Set","exists","_exists","initalized","_initialized","constructor","args","setSettings","obs","setSourceSettings","setting","addFilter","ref","filter","source","Error","getSourceFilterInfo","then","i","catch","addFilterToSource","initialSettings","Object","assign","createItemInstance","scene","id","SceneItem","refreshFilters","sourceFilters","getSourceFilters","filtersArray","values","filtersToRemove","sourceFilter","every","filtersToAdd","filtersToUpdateSettings","some","Promise","all","map","f","removeFilterFromSource","setSourceFilterSettings","index","reorderSourceFilter","newIndex","initialize","getSourceSettings","sourceSettings","sourceType","SIMPLE_OBS_REFS","refs","saveRefs","sources","set","initializeFilters","e","Array","isArray","finally","createItem","itemId","properties","getRef","undefined","getSceneItemProperties","removeRef","addSceneItem","newItemId","createSource","addRef","item","linkItem","console","warn","pushRefs","forEach"],"mappings":";;;;;;;AAgBO,MAAeA,MAAf,CAGL;AACSC,EAAAA,IAAI;AAEbC,EAAAA,aAAa;AAEbC,EAAAA,IAAI;AACJC,EAAAA,QAAQ;AACRC,EAAAA,OAAO,GAAqC,EAArC;AACPC,EAAAA,MAAM,GAAG,KAAH;AAENC,EAAAA,aAAa,GAAG,IAAIC,GAAJ,EAAH;AAEb;AACF;AACA;;AACY,MAANC,MAAM,GAAG;AACX,WAAO,KAAKC,OAAZ;AACD;;AACSA,EAAAA,OAAO,GAAG,KAAH;AAEjB;AACF;AACA;;AACgB,MAAVC,UAAU,GAAG;AACf,WAAO,KAAKC,YAAZ;AACD;;AACSA,EAAAA,YAAY,GAAG,KAAH;;AAEtBC,EAAAA,WAAW,CAACC,IAAD,EAIR;AACD,SAAKX,IAAL,GAAYW,IAAI,CAACX,IAAjB;AACA,SAAKC,QAAL,GAAgBU,IAAI,CAACV,QAAL,IAAkB,EAAlC;AACA,SAAKC,OAAL,GAAeS,IAAI,CAACT,OAAL,IAAiB,EAAhC;AACD;AAED;AACF;AACA;AACA;;;AACmB,QAAXU,WAAW,CAACX,QAAD,EAAkC;AACjD,UAAMY,SAAG,CAACC,iBAAJ,CAAsB;AAC1Bd,MAAAA,IAAI,EAAE,KAAKA,IADe;AAE1BF,MAAAA,IAAI,EAAE,KAAKA,IAFe;AAG1BG,MAAAA;AAH0B,KAAtB,CAAN;;AAMA,SAAK,IAAIc,OAAT,IAAoBd,QAApB,EAA8B;AAC5B,WAAKA,QAAL,CAAcc,OAAd,IAAyBd,QAAQ,CAACc,OAAD,CAAjC;AACD;AACF;AAED;AACF;AACA;AACA;AACA;;;AACiB,QAATC,SAAS,CAACC,GAAD,EAAcC,MAAd,EAA8B;AAC3C,QAAIA,MAAM,CAACC,MAAX,EAAmB;AACjB,YAAM,IAAIC,KAAJ,CACH,UAAS,KAAKpB,IAAK,uCAAsCkB,MAAM,CAACC,MAAP,CAAcnB,IAAK,EADzE,CAAN;AAGD;;AAED,UAAMM,MAAM,GAAG,MAAMO,SAAG,CACrBQ,mBADkB,CACE;AACnBF,MAAAA,MAAM,EAAE,KAAKnB,IADM;AAEnBkB,MAAAA,MAAM,EAAEA,MAAM,CAAClB;AAFI,KADF,EAKlBsB,IALkB,CAKZC,CAAD,IAAO;AACX,UAAIA,CAAC,CAACzB,IAAF,KAAWoB,MAAM,CAACpB,IAAtB,EACE,MAAM,IAAIsB,KAAJ,CACH,UAAS,KAAKpB,IAAK,oDAAmDkB,MAAM,CAACpB,IAAK,WAAUyB,CAAC,CAACzB,IAAK,EADhG,CAAN;AAGF,aAAO,IAAP;AACD,KAXkB,EAYlB0B,KAZkB,CAYZ,MAAM,KAZM,CAArB;AAcAN,IAAAA,MAAM,CAACC,MAAP,GAAgB,IAAhB;AAEA,QAAI,CAACb,MAAL,EACE,MAAMO,SAAG,CAACY,iBAAJ,CAAsB,EAC1B,GAAGP,MADuB;AAE1BC,MAAAA,MAAM,EAAE,KAAKnB;AAFa,KAAtB,CAAN;AAKF,UAAMkB,MAAM,CAACN,WAAP,CAAmBM,MAAM,CAACQ,eAA1B,CAAN;AAEAC,IAAAA,MAAM,CAACC,MAAP,CAAc,KAAK1B,OAAnB,EAA4B;AAAE,OAACe,GAAD,GAAOC;AAAT,KAA5B;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;;AACEW,EAAAA,kBAAkB,CAACC,KAAD,EAAeC,EAAf,EAA2Bd,GAA3B,EAAyD;AACzE,WAAO,IAAIe,mBAAJ,CAAc,IAAd,EAAoBF,KAApB,EAA2BC,EAA3B,EAA+Bd,GAA/B,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACsB,QAAdgB,cAAc,GAAG;AACrB,QAAI,CAAC,KAAK3B,MAAV,EAAkB;AAElB,UAAM;AAAEJ,MAAAA,OAAO,EAAEgC;AAAX,QAA6B,MAAMrB,SAAG,CAACsB,gBAAJ,CAAqB;AAC5DhB,MAAAA,MAAM,EAAE,KAAKnB;AAD+C,KAArB,CAAzC;AAIA,UAAMoC,YAAsB,GAAGT,MAAM,CAACU,MAAP,CAAc,KAAKnC,OAAnB,CAA/B;AAEA,UAAMoC,eAAe,GAAGJ,aAAa,CAAChB,MAAd,CAAsBqB,YAAD;AAE3CH,IAAAA,YAAY,CAACI,KAAb,CACGtB,MAAD,IACEA,MAAM,CAAClB,IAAP,KAAgBuC,YAAY,CAACvC,IAA7B,IACCkB,MAAM,CAAClB,IAAP,KAAgBuC,YAAY,CAACvC,IAA7B,IACCkB,MAAM,CAACpB,IAAP,KAAgByC,YAAY,CAACzC,IAJnC,CAFsB,CAAxB;AASA,UAAM2C,YAAY,GAAGL,YAAY,CAAClB,MAAb,CAAqBA,MAAD;AAEvCgB,IAAAA,aAAa,CAACM,KAAd,CACGD,YAAD,IACErB,MAAM,CAAClB,IAAP,KAAgBuC,YAAY,CAACvC,IAA7B,IACCkB,MAAM,CAAClB,IAAP,KAAgBuC,YAAY,CAACvC,IAA7B,IACCkB,MAAM,CAACpB,IAAP,KAAgByC,YAAY,CAACzC,IAJnC,CAFmB,CAArB;AASA,UAAM4C,uBAAuB,GAAGN,YAAY,CAAClB,MAAb,CAAqBA,MAAD,IAClDgB,aAAa,CAACS,IAAd,CACGJ,YAAD,IACErB,MAAM,CAAClB,IAAP,KAAgBuC,YAAY,CAACvC,IAA7B,IAAqCkB,MAAM,CAACpB,IAAP,KAAgByC,YAAY,CAACzC,IAFtE,CAD8B,CAAhC;AAOA,UAAM8C,OAAO,CAACC,GAAR,CAAY,CAChB,GAAGP,eAAe,CAACQ,GAAhB,CACAC,CAAD,IACElC,SAAG,CAACmC,sBAAJ,CAA2B;AACzB7B,MAAAA,MAAM,EAAE,KAAKnB,IADY;AAEzBkB,MAAAA,MAAM,EAAE6B,CAAC,CAAC/C;AAFe,KAA3B,CAFD,EAMD,GAAGyC,YAAY,CAACK,GAAb,CAAkBC,CAAD,IAClBlC,SAAG,CAACY,iBAAJ,CAAsB;AACpBN,MAAAA,MAAM,EAAE,KAAKnB,IADO;AAEpBA,MAAAA,IAAI,EAAE+C,CAAC,CAAC/C,IAFY;AAGpBC,MAAAA,QAAQ,EAAE8C,CAAC,CAAC9C,QAHQ;AAIpBH,MAAAA,IAAI,EAAEiD,CAAC,CAACjD;AAJY,KAAtB,CADC,CANF,EAcD,GAAG4C,uBAAuB,CAACI,GAAxB,CAA6BC,CAAD,IAC7BlC,SAAG,CAACoC,uBAAJ,CAA4B;AAC1B/B,MAAAA,MAAM,EAAE6B,CAAC,CAAC/C,IADgB;AAE1BmB,MAAAA,MAAM,EAAE,KAAKnB,IAFa;AAG1BC,MAAAA,QAAQ,EAAE8C,CAAC,CAAC9C;AAHc,KAA5B,CADC,CAdF,CADa,CAAZ,CAAN;AAyBA,UAAM2C,OAAO,CAACC,GAAR,CACJT,YAAY,CAACU,GAAb,CAAiB,CAAC5B,MAAD,EAASgC,OAAT,KACfrC,SAAG,CAACsC,mBAAJ,CAAwB;AACtBhC,MAAAA,MAAM,EAAE,KAAKnB,IADS;AAEtBkB,MAAAA,MAAM,EAAEA,MAAM,CAAClB,IAFO;AAGtBoD,MAAAA,QAAQ,EAAEF;AAHY,KAAxB,CADF,CADI,CAAN;AASD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACEG,EAAAA,UAAU,GAAyB;AACjC,QAAI,KAAK7C,UAAT,EAAqB,OAAO,IAAP;AAErB,WAAOK,SAAG,CACPyC,iBADI,CACc;AACjBtD,MAAAA,IAAI,EAAE,KAAKA;AADM,KADd,EAIJsB,IAJI,CAIC,OAAO;AAAEiC,MAAAA,cAAF;AAAkBC,MAAAA;AAAlB,KAAP,KAA0C;AAC9C;AACA,UAAIA,UAAU,KAAK,KAAK1D,IAAxB,EAA8B,MAAM,CAAC,aAAD,EAAgB0D,UAAhB,CAAN,CAFgB;;AAK9C,UAAID,cAAc,CAACE,eAAnB,EACE,KAAKC,IAAL,GAAYH,cAAc,CAACE,eAA3B;AAEF,YAAM,KAAKE,QAAL,EAAN;AAEA9C,MAAAA,SAAG,CAAC+C,OAAJ,CAAYC,GAAZ,CAAgB,KAAK7D,IAArB,EAA2B,IAA3B;AAEA,WAAKO,OAAL,GAAe,IAAf;AAEA,YAAM,KAAKuD,iBAAL,EAAN;AAEA,aAAO,KAAKxD,MAAZ;AACD,KArBI,EAsBJkB,KAtBI,CAsBGuC,CAAD,IAAO;AACZ,UAAIC,KAAK,CAACC,OAAN,CAAcF,CAAd,KAAoBA,CAAC,CAAC,CAAD,CAAD,KAAS,aAAjC,EACE,MAAM,IAAI3C,KAAJ,CACH,oBAAmB,KAAKpB,IAAK,oDAAmD+D,CAAC,CAAC,CAAD,CAAI,eAAc,KAAKjE,IAAK,EAD1G,CAAN;AAIF,aAAQ,KAAKS,OAAL,GAAe,KAAvB;AACD,KA7BI,EA8BJ2D,OA9BI,CA8BI,MAAO,KAAKzD,YAAL,GAAoB,IA9B/B,CAAP;AA+BD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACkB,QAAV0D,UAAU,CAAClD,GAAD,EAAea,KAAf,EAAuD;AACrE,QAAI,CAAC,KAAKtB,UAAV,EACE,MAAM,IAAIY,KAAJ,CACH,gCAA+B,KAAKpB,IAAK,2BADtC,CAAN;AAIF,QAAIoE,MAAJ;AACA,QAAIC,UAAsC,GAAG,IAA7C;;AAEA,QAAI,KAAK/D,MAAT,EAAiB;AACf;AACA,YAAMyB,EAAE,GAAG,KAAKuC,MAAL,CAAYxC,KAAK,CAAC9B,IAAlB,EAAwBiB,GAAxB,CAAX,CAFe;;AAKf,UAAIc,EAAE,KAAKwC,SAAX,EAAsB;AACpB,YAAI;AACFF,UAAAA,UAAU,GAAG,MAAMxD,SAAG,CAAC2D,sBAAJ,CAA2B;AAC5CzC,YAAAA,EAD4C;AAE5CD,YAAAA,KAAK,EAAEA,KAAK,CAAC9B;AAF+B,WAA3B,CAAnB;AAKAoE,UAAAA,MAAM,GAAGrC,EAAT;AACD,SAPD,CAOE,MAAM;AACN;AACA,eAAK0C,SAAL,CAAe3C,KAAK,CAAC9B,IAArB,EAA2BiB,GAA3B;AAEA,gBAAM;AAAEmD,YAAAA,MAAM,EAAErC;AAAV,cAAiB,MAAMlB,SAAG,CAAC6D,YAAJ,CAAiB;AAC5C5C,YAAAA,KAAK,EAAEA,KAAK,CAAC9B,IAD+B;AAE5CmB,YAAAA,MAAM,EAAE,KAAKnB;AAF+B,WAAjB,CAA7B;AAKAoE,UAAAA,MAAM,GAAGrC,EAAT;AACD;AACF,OAnBD,MAmBO;AACL;AACA;AACA;AACA;AACA;AAEA;AAEA,cAAM;AAAEqC,UAAAA,MAAM,EAAErC;AAAV,YAAiB,MAAMlB,SAAG,CAAC6D,YAAJ,CAAiB;AAC5C5C,UAAAA,KAAK,EAAEA,KAAK,CAAC9B,IAD+B;AAE5CmB,UAAAA,MAAM,EAAE,KAAKnB;AAF+B,SAAjB,CAA7B;AAKAoE,QAAAA,MAAM,GAAGrC,EAAT;AACD;AACF,KAxCD,MAwCO;AACL,YAAM;AAAEqC,QAAAA,MAAM,EAAEO;AAAV,UAAwB,MAAM9D,SAAG,CAAC+D,YAAJ,CAAiB;AACnD5E,QAAAA,IAAI,EAAE,KAAKA,IADwC;AAEnDF,QAAAA,IAAI,EAAE,KAAKA,IAFwC;AAGnDgC,QAAAA,KAAK,EAAEA,KAAK,CAAC9B,IAHsC;AAInDC,QAAAA,QAAQ,EAAE,KAAKA;AAJoC,OAAjB,CAApC;AAOAY,MAAAA,SAAG,CAAC+C,OAAJ,CAAYC,GAAZ,CAAgB,KAAK7D,IAArB,EAA2B,IAA3B;AAEA,WAAKO,OAAL,GAAe,IAAf;AAEA,YAAM,KAAKuD,iBAAL,EAAN;AAEAM,MAAAA,MAAM,GAAGO,SAAT;AACD,KAhEoE;;;AAmErE,SAAKE,MAAL,CAAY/C,KAAK,CAAC9B,IAAlB,EAAwBiB,GAAxB,EAA6BmD,MAA7B,EAnEqE;;AAsErE,UAAMU,IAAI,GAAG,KAAKjD,kBAAL,CAAwBC,KAAxB,EAA+BsC,MAA/B,EAAuCnD,GAAvC,CAAb,CAtEqE;;AAyErE,QAAIoD,UAAU,KAAK,IAAnB,EAAyBS,IAAI,CAACT,UAAL,GAAkBA,UAAlB;AAEzB,WAAOS,IAAP;AACD;AAED;AACF;AACA;AACA;;;AACiC,QAAjBhB,iBAAiB,GAAG;AAChC;AACA;AACA,SAAK,IAAI7C,GAAT,IAAgB,KAAKf,OAArB,EAA8B;AAC5B,UAAIgB,MAAM,GAAG,KAAKhB,OAAL,CAAae,GAAb,CAAb;AAEAC,MAAAA,MAAM,CAACC,MAAP,GAAgB,IAAhB,CAH4B;AAK5B;;AACAD,MAAAA,MAAM,CAACjB,QAAP,GAAkBiB,MAAM,CAACQ,eAAzB;AACD,KAV+B;;;AAahC,UAAM,KAAKO,cAAL,EAAN;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;;AACE8C,EAAAA,QAAQ,CAACjD,KAAD,EAAeC,EAAf,EAA2Bd,GAA3B,EAAwC;AAC9C,SAAKd,MAAL,GAAc,IAAd;AACA,SAAKI,OAAL,GAAe,IAAf;AACA,SAAKE,YAAL,GAAoB,IAApB;AAEA,WAAO,KAAKoB,kBAAL,CAAwBC,KAAxB,EAA+BC,EAA/B,EAAmCd,GAAnC,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;;;AACUyC,EAAAA,IAAI,GAA+C,EAA/C;AAEZ;AACF;AACA;AACA;AACA;;AACYC,EAAAA,QAAQ,GAAG;AACnB;AACA;AACA,WAAO9C,SAAG,CAACC,iBAAJ,CAAsB;AAC3Bd,MAAAA,IAAI,EAAE,KAAKA,IADgB;AAE3BF,MAAAA,IAAI,EAAE,KAAKA,IAFgB;AAG3BG,MAAAA,QAAQ,EAAE;AACRwD,QAAAA,eAAe,EAAE,KAAKC;AADd;AAHiB,KAAtB,CAAP;AAOD;;AAESY,EAAAA,MAAM,CAACxC,KAAD,EAAmBb,GAAnB,EAAqD;AACnE,QAAI,KAAKyC,IAAL,CAAU5B,KAAV,CAAJ,EAAsB,OAAO,KAAK4B,IAAL,CAAU5B,KAAV,EAAiBb,GAAjB,CAAP;AAEtB,WAAOsD,SAAP;AACD;;AAESM,EAAAA,MAAM,CAAC/C,KAAD,EAAmBb,GAAnB,EAAiCc,EAAjC,EAA6C;AAC3D,KAAC,KAAK2B,IAAL,CAAU5B,KAAV,MAAqB,EAAtB,EAA0Bb,GAA1B,IAAiCc,EAAjC;AAEA,SAAK4B,QAAL,GAAgBnC,KAAhB,CAAuBuC,CAAD,IACpBiB,OAAO,CAACC,IAAR,CAAc,qBAAoBhE,GAAI,OAAMc,EAAG,EAA/C,EAAkDgC,CAAlD,CADF;AAGD;;AAESU,EAAAA,SAAS,CAAC3C,KAAD,EAAmBb,GAAnB,EAAiC;AAClD,QAAI,CAAC,KAAKyC,IAAL,CAAU5B,KAAV,CAAL,EAAuB;AAEvB,WAAO,KAAK4B,IAAL,CAAU5B,KAAV,EAAiBb,GAAjB,CAAP;AAEA,SAAK0C,QAAL,GAAgBnC,KAAhB,CAAuBuC,CAAD,IACpBiB,OAAO,CAACC,IAAR,CAAc,wBAAuBhE,GAAI,EAAzC,EAA4C8C,CAA5C,CADF;AAGD;AAED;AACF;AACA;AACA;AACA;AACA;;;AACEmB,EAAAA,QAAQ,GAAG;AACT,QAAIxB,IAAgB,GAAG,EAAvB;AAEA,SAAKtD,aAAL,CAAmB+E,OAAnB,CAA4BL,IAAD,IAAU;AACnC,OAACpB,IAAI,CAACoB,IAAI,CAAChD,KAAL,CAAW9B,IAAZ,CAAJ,KAA0B,EAA3B,EAA+B8E,IAAI,CAAC7D,GAApC,IAA2C6D,IAAI,CAAC/C,EAAhD;AACD,KAFD;AAIA,SAAK2B,IAAL,GAAYA,IAAZ;AAEA,WAAO,KAAKC,QAAL,EAAP;AACD;;AAzaD;;;;"}