{"version":3,"file":"Scene.js","sources":["../../src/Scene.ts"],"sourcesContent":null,"names":["Scene","Source","type","items","itemsSchema","constructor","args","create","exists","initialize","obs","createScene","name","saveRefs","wait","_exists","scenes","set","ref","addItem","itemList","getSceneItemList","ownedItemIds","Object","keys","reverse","map","id","allItemsOrdered","sceneItems","filter","itemId","includes","length","reorderSceneItems","scene","setSettings","SIMPLE_OBS_LINKED","link","options","initalized","Error","multipleItemSources","noItemSources","itemSchema","sourceItems","i","sourceName","source","push","s","join","Promise","all","entries","properties","schemaItem","find","item","linkItem","assign","getProperties","optionRequests","setProperties","setSourceSettings","settings","sourceNeedsUpdating","initialized","createItem","sourceUpdateRequests","data","mergeDeep","_create","makeCurrentScene","setCurrentScene","remove","removeScene","delete","sources","createInitialItem"],"mappings":"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"}